이번 시간에는 Cron 스케줄에 대해서 설명드리도록 하겠습니다.
Cron 스케줄인 워크플로우, DAG이 언제 실행되어야 하는지 결정해주는데
Airflow에서 Cron 스케줄 하나로 원하는 날짜는 거의 다 셋팅할 수 있습니다.

바로 한번 보도록 할께요.
먼저 Cron 스케줄의 정의를 한번 볼께요.
task를 실행하는 시간을 정하기 위해 다섯개의 필드로 구성된 문자열 이라고 했는데요.
그 필드는 각각 몇 분에 돌지, 몇 시에 돌지, 몇 일에 돌지, 몇 월에 돌지, 무슨 요일에 돌지를 결정하는 5개의 필드가 있습니다. 추가로 원래 cron 스케줄에는 몇 년도에 돌지를 정하는 여섯 번째 필드가 있는 경우도 있는데 airflow에서는 다섯개의 필드만 씁니다. 

그래서 cron 스케줄을 작성하는 방법은 분시일월요일에 해당하는 값을 적어주면 되요.
먼저 왼쪽에 특수기호부터 보겠습니다.
먼저 * 는  모든 값을 의미해요.
첫 번째 예시를 보면 15분 2시에 돌고, 모든 일, 모든 월, 모든 요일을 뜻합니다.
15 2 * * *
한마디로 매일 2시 15분이에요.

그 밑에는 0분 매시를 뜻합니다.
0 * * * *
즉 1시 0분, 2시 0분, 3시 0분... 과 같이 한시간에 한번씩 도는 작업을 의미해요.

그 밑에 볼께요.
0 0 1 * *
이건 0분 0시 1일 이죠? 
그럼 매월 1일 0시 0분에 도는 월 배치작업을 의미합니다. 

그 밑에 볼께요.
10 1 * * 1
이것도 한번 해석해볼까요?
10분 1시 그리고 매일, 매월, 그런데 끝이 1이에요.
끝은 요일이라 그랬어요. 요일은 일요일이 0이고 토요일이 6입니다.
참고로 쉽게 외우시려면 달력을 생각하시면 되요 .
달력을 보면 가장 왼쪽이 일요일이고 가장 오른쪽이 토요일이죠?
왼쪽부터 오른쪽으로 0부터 시작한다고 보시면 외우기 쉬워요.

그래서 1은 월요일이에요.
그러면 매주 월요일 1시 10분에 도는 주단위 스케줄을 의미합니다. 

다시 이제 왼쪽 특수문자를 볼꼐요.
특수 문자 중에 대시가 있습니다. 대시는 범위를 지정하는거에요.
다시 오른쪽 예시에서  0 9-18 * * * 를 보면
0분 그리고 시간은 9시부터 18시 입니다. 
즉 매일 9시부터 18시까지만 1시간마다 도는 작업을 의미합니다. 

대시는 분, 시간, 일, 월, 요일 다 올 수 있어요.

다시 특수문자를 볼께요.
대시는 범위를 지정했다면 콤마는 해당 값만 콕콕 찍는방법입니다. 

다시 오른쪽에 예시를 보면 
0 1 1,2,3 * * 

이건 1시 0분, 그리고 1일 2일 3일을 의미합니다. 
즉 매월 1일, 2일, 3일 1시 10분에만 도는 작업이에요.

이번엔 특수문자 슬래쉬를 볼께요. 
슬래시는 증가값을 지정하는데, 왼쪽에는 시작하는 값, 오른쪽에는 증가값을 적어준다고 보면 됩니다. 
이번엔 */ 30 * * * 
를 볼꼐요. 
분에 */30 이 있으니까 30분마다 입니다.
즉 매시 0분, 매시 30분 이렇게 수행되는 30분 단위 작업이에요.

대시하고, 슬래쉬를 같이 쓸수도 있어요. 
10-59/30 * * * 를 볼께요.

분은 10부터 59분인데, 30분 마다네요.
즉 매시 10분, 40분에 도는 작업을 의미합니다. 

그다음 10 1 * * 1-5를 볼께요.

1시 10분인데, 요일이 1부터 5네요. 1이 월요일이라고했죠? 그리고 5는 금요일입니다.
즉 월요일부터 금요일까지만 1시 10분에 도는 작업을 의미합니다. 

다음 0 */2 * * * 볼께요.
이건 시간인데 2시간 마다네요.
즉 매일 0시, 2시, 4시 이렇게 도는 2시간 단위 JOB을 의미합니다. 

다음 0 0 */2 * * 볼께요. 
이건 일에 /2가 있네요. 그럼 2일 4일 6일 8일 0시 0분에 도는 작업을 의미합니다.
즉 짝수일에만 도는 작업이 되겠네요. 

자 이제 마지막 특수문자와 스케줄을 볼께요.
특수문자 중에 L 이 있는데 이 L은 일과 요일에만 설정이 가능해요.
만약 일에 L이 있다면 해당월의 마지막 일을 의미합니다.
만약 요일에 L이 있다면 마지막 요일을 의미합니다. 

예를 볼께요 .
10 1 L * * 이건 일에 L이 있죠? 그럼 매월 마지막 일 1시 10분에 도는 작업을 의미합니다. 

그다음 특수기호주에 # 이 있는데요. 
이건 요일에만 사용합니다. 
 #을 기준으로 왼쪽에는 무슨 요일인지, 오른쪽에는 몇 번째 요일인지를 나타내요.

예를 보겠습니다. 
10 1 * * 6#3 
이건 토요일인데 매월 세째주 토요일을 의미해요.
즉 매월 셋째주 토요일 1시 10분에 도는 작업을 의미합니다.

Airflow에서 DAG Schedule 파라미터를 설정할 때는 지금까지 알아본 Cron 스케줄을 사용하게 됩니다.
정말 특이한 케이스 아니면 Cron 스케줄로 대부분 원하는 수행날짜 설정이 가능해요.
따라서 Cron 스케줄 작성하고 읽는거에 좀 익숙해지면 좋겠습니다. 

오늘 Cron 설명은 여기까지이구요.
다음 시간에는 Bash 오퍼레이터 좀 더 알아보는 시간을 갖도록 하겠습니다.

수고하셨습니다. 
